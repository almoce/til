<!doctypehtml><meta charset=utf8><meta content="IE=edge"http-equiv=X-UA-Compatible><title>shader intro(uniform and attribute)</title><link href=/css.css rel=stylesheet><link href=/highlight.css rel=stylesheet><div class=container><h1 id=shader-introuniform-and-attribute>shader intro(uniform and attribute)</h1><h3 id=uniform>uniform</h3><p>uniform is a variable broadcast out to a shader program, we can define a uniform variable in javascript and passing the variable to vertex shader and fragment shader.<pre><code class="hljs language-javascript">uniform vec3 color;

<span class=hljs-keyword>void</span> <span class="hljs-function hljs-title">main</span>(<span class=hljs-params></span>) {
  gl_FragColor = <span class="hljs-function hljs-title">vec4</span>(color, <span class=hljs-number>1</span>);
}
</code></pre><ol><li>get the uniform location in shader program, <code>gl.getUniformLocation(${shaderProgram}, ${uniformVaraibleName})</code>, <em>shaderProgram</em> is the program created from shader <code>gl.createProgram()</code>, and the <em>uniformVariableName</em> is the same name defined in the shader source code string, this step should be use after <code>gl.linkProgram</code> and before <code>gl.useProgram</code><li>set the uniform variable with <code>gl.uniform3f</code>, to set value this command should called after <code>gl.useProgram</code>, so that can set the current location of program.</ol><pre><code class="hljs language-javascript"><span class=hljs-comment>/*
    ......
    const program = gl.createProgram()
*/</span>
<span class=hljs-keyword>let</span> colorLocatoin
<span class=hljs-keyword>function</span> <span class="hljs-function hljs-title">init</span>(<span class=hljs-params>gl</span>) {
    <span class=hljs-comment>// gl.linkProgram(program)</span>
    colorLocatoin = gl.<span class="hljs-function hljs-title">getUnioformLocation</span>(program, <span class=hljs-string>'color'</span>)
}
<span class=hljs-keyword>function</span> <span class="hljs-function hljs-title">draw</span>(<span class=hljs-params>gl</span>) {
    <span class=hljs-comment>// gl.useProgram(program)</span>
    gl.<span class="hljs-function hljs-title">uniform3f</span>(colorLocatoin, <span class=hljs-number>1</span>, <span class=hljs-number>0</span>, <span class=hljs-number>0</span>)
    <span class=hljs-comment>// or</span>
    gl.<span class="hljs-function hljs-title">uniform3fv</span>(colorLocatoin, [<span class=hljs-number>1</span>,<span class=hljs-number>0</span>,<span class=hljs-number>0</span>])
}
</code></pre><p><strong>gl.uniform[1234][fi]?v(location, value)</strong><ul><li><code>gl.uniform1f</code> - float<li><code>gl.uniform2f</code> - vec2<li><code>gl.uniform3f</code> - vec3<li><code>gl.uniform4f</code> - vec4<li><code>gl.uniform1i</code> - int (Or sampler2d/samplerCube -- more on this later)<li><code>gl.uniform2i</code> - ivec2<li><code>gl.uniform3i</code> - ivec3<li><code>gl.uniform4i</code> - ivec4<li><code>gl.uniformMatrix2fv</code> - mat2<li><code>gl.uniformMatrix3fv</code> - mat3<li><code>gl.uniformMatrix4fv</code> - mat4</ul><h3 id=attribute>attribute</h3><p>Attributes are processed by the vertex shader and used to generate primitives, which are then rasterized by the GPU. in javascirpt, store the varialbe as buffer atrribute, and those attributes will pass and process by vertex shader. attribute location are integers and stored in buffer.<ol><li>set an attribute location <code>gl.bindAttribLocation(${program}, ${locationInterger}, ${attributeName})</code>, this step should called before we link the program <code>gl.linkProgram()</code></ol><pre><code class="hljs language-javascript">gl.<span class="hljs-function hljs-title">bindAttribLocation</span>(program, <span class=hljs-number>0</span>, <span class=hljs-string>'position'</span>)
gl.<span class="hljs-function hljs-title">bindAttribLocation</span>(program, <span class=hljs-number>1</span>, <span class=hljs-string>'color'</span>)
gl.<span class="hljs-function hljs-title">linkProgram</span>(program)
</code></pre></div>