<!doctypehtml><meta charset=utf8><meta content="IE=edge"http-equiv=X-UA-Compatible><title>webgl buffer and attribute pinter</title><link href=/css.css rel=stylesheet><link href=/highlight.css rel=stylesheet><div class=container><h1 id=webgl-buffer-and-attribute-pinter>webgl buffer and attribute pinter</h1><h3 id=buffer>buffer</h3><p>Vertex attributes are read from arrays of binary data called buffers.<ol><li><code>gl.createBuffer()</code> To create a buffer<li><code>gl.bindBuffer(gl.ARRAY_BUFFER, buffer)</code> bind and define the buffer target type<li><code>gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(DATA), gl.DYNAMIC_DRAW)</code> set the buffer data</ol><pre><code class="hljs language-javascript"><span class=hljs-keyword>const</span> buffer = gl.<span class="hljs-title hljs-function">createBuffer</span>()
gl.<span class="hljs-title hljs-function">bindBuffer</span>(gl.<span class=hljs-property>ARRAY_BUFFER</span>, buffer)
gl.<span class="hljs-title hljs-function">bufferData</span>(gl.<span class=hljs-property>ARRAY_BUFFER</span>, <span class=hljs-keyword>new</span> <span class="hljs-title hljs-class">Float32Array</span>(<span class="hljs-constant hljs-variable">DATA</span>), gl.<span class=hljs-property>DYNAMIC_DRAW</span>)
</code></pre><p><strong>gl.bindBuffer(target: GLenum, buffer: WebGLBuffer)<sup><a href=#user-content-fn-bindbuffer aria-describedby=footnote-label data-footnote-ref id=user-content-fnref-bindbuffer>1</a></sup></strong><blockquote><p>target: GLenum</blockquote><ul><li><code>gl.ARRAY_BUFFER</code>: Buffer containing vertex attributes, such as vertex coordinates, texture coordinate data, or vertex color data.<li><code>gl.ELEMENT_ARRAY_BUFFER</code>: Buffer used for element indices.<li>When using a WebGL 2 context, the following values are available additionally:<ul><li><code>gl.COPY_READ_BUFFER</code>: Buffer for copying from one buffer object to another.<li><code>gl.COPY_WRITE_BUFFER</code>: Buffer for copying from one buffer object to another.<li><code>gl.TRANSFORM_FEEDBACK_BUFFER</code>: Buffer for transform feedback operations.<li><code>gl.UNIFORM_BUFFER</code>: Buffer used for storing uniform blocks.<li><code>gl.PIXEL_PACK_BUFFER</code>: Buffer used for pixel transfer operations.<li><code>gl.PIXEL_UNPACK_BUFFER</code>: Buffer used for pixel transfer operations.</ul></ul><blockquote><p>buffer: WebGLBuffer</blockquote><p><strong>gl.bufferData(target: GLenum, data: [], usageHint:)<sup><a href=#user-content-fn-bufferdata aria-describedby=footnote-label data-footnote-ref id=user-content-fnref-bufferdata>2</a></sup></strong><blockquote><p>target: GLenum<br>data: is either a number representing the size of the buffer to reserve, or a typed array representing data to allocate.<br>usageHint is a flag which has no semantic effect, but can be one of the following values, used for performance hints.</blockquote><ul><li><code>gl.DYNAMIC_DRAW</code>: buffers that are updated frequently<li><code>gl.STREAM_DRAW</code>: buffers that won't chang<li><code>gl.STATIC_DRAW</code>: buffers that are created once and used once.</ul><pre><code class="hljs language-javascript"><span class=hljs-comment>// WebGL1:</span>
<span class=hljs-keyword>void</span> gl.<span class="hljs-title hljs-function">bufferData</span>(target, size, usage);
<span class=hljs-keyword>void</span> gl.<span class="hljs-title hljs-function">bufferData</span>(target, <span class="hljs-title hljs-class">ArrayBuffer</span>? srcData, usage);
<span class=hljs-keyword>void</span> gl.<span class="hljs-title hljs-function">bufferData</span>(target, <span class="hljs-title hljs-class">ArrayBufferView</span> srcData, usage);

<span class=hljs-comment>// WebGL2:</span>
<span class=hljs-keyword>void</span> gl.<span class="hljs-title hljs-function">bufferData</span>(target, <span class="hljs-title hljs-class">ArrayBufferView</span> srcData, usage, srcOffset, length);
</code></pre><h3 id=attribute-pointers>attribute pointers</h3><p>vertex attribute pointers are pointers to the buffer data, to define the range of data from buffer.<ul><li>first we need enable the vertex attribute, <code>gl.enableVertexAttribArray(${attributeLocation})</code>, attributeLocation is the step when we create a shader, and when we already defined the location index of attribute with the command <code>gl.bindAttribLocation</code><li>then tell webgl to use an attribute pointer from the location with defined range and type <code>gl.vertexAttribPointer(${attributeLocation}, ${size}, ${type}, ${normalized}, ${stride}, ${offset})</code><ul><li><code>attributeLocation</code>, an index to the attribute location<li><code>size</code>, the data type or size of the attribute (1 = float, 2 = vec2, 3 = vec3, 4 = vec4)<li><code>type</code> is the type fot the data in the buffer, (gl.FLOAT, gl.BYTE, gl.SHORT, gl.INT, gl.UNSIGNED_BYTE, gl.UNSIGNED_SHORT, gl.UNSIGNED_INT, gl.FIXED)<li><code>normalized</code>, a flag which checks if set for BYTE, SHORT or INT types rescales them to the range +/- 1. This can be useful for encoding values like normals or texture coordinates compactly.<li><code>stride</code>, is the distance between successive attributes in bytes. If set to 0, then it assumes that the attributes are tightly packed.<li><code>offset</code>, is a pointer (in bytes) to the start of the first attribute in the array.</ul></ul><pre><code class="hljs language-javascript"><span class=hljs-keyword>const</span> <span class="hljs-constant hljs-variable">VERT_SRC</span> = <span class=hljs-string>`
    attribute vec2 position;
    voind main() {
        vec2 pos = position
        gl_Position = vec4(pos, 0, 1)
    }
`</span>
<span class=hljs-keyword>const</span> <span class="hljs-constant hljs-variable">BUFFER_DATA</span> = [
    x0, y0,
    x1, y1,
    x2, y2
]
<span class=hljs-keyword>let</span> program
<span class=hljs-comment>// program = createShaderProgram()</span>

<span class=hljs-keyword>const</span> positionLocation = <span class=hljs-number>0</span> <span class=hljs-comment>// defined the location of the attribute</span>

<span class=hljs-keyword>const</span> buffer = gl.<span class="hljs-title hljs-function">createBuffer</span>()
gl.<span class="hljs-title hljs-function">bindBuffer</span>(gl.<span class=hljs-property>ARRAY_BUFFER</span>, buffer)
gl.<span class="hljs-title hljs-function">bufferData</span>(gl.<span class=hljs-property>ARRAY_BUFFER</span>, <span class=hljs-keyword>new</span> <span class="hljs-title hljs-class">Float32Array</span>(<span class="hljs-constant hljs-variable">BUFFER_DATA</span>), gl.<span class=hljs-property>DYNAMIC_DRAW</span>)

gl.<span class="hljs-title hljs-function">bindAttribLocation</span>(program, positionLocation, <span class=hljs-string>'position'</span>)
gl.<span class="hljs-title hljs-function">enableVertexAttribArray</span>(positionLocation)
gl.<span class="hljs-title hljs-function">vertexAttribPointer</span>(positionLocation, <span class=hljs-number>2</span>, gl.<span class=hljs-property>FLOAT</span>, <span class=hljs-literal>false</span>, <span class=hljs-number>0</span>, <span class=hljs-number>0</span>)
</code></pre><hr><section class=footnotes data-footnotes><h2 class=sr-only id=footnote-label>Footnotes</h2><ol><li id=user-content-fn-bindbuffer><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/bindBuffer>MDN - WebGLRenderingContext.bindBuffer()</a> <a href=#user-content-fnref-bindbuffer aria-label="Back to content"class=data-footnote-backref data-footnote-backref>↩</a><li id=user-content-fn-bufferdata><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/bufferData>MDN - WebGLRenderingContext.bufferData()</a> <a href=#user-content-fnref-bufferdata aria-label="Back to content"class=data-footnote-backref data-footnote-backref>↩</a></ol></section></div>